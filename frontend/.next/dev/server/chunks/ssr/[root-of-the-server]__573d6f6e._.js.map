{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///Users/ervinvincepiol/Documents/eccomerce-fullstack/frontend/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  createContext,\n  useContext,\n  useEffect,\n  useState,\n  ReactNode,\n} from \"react\";\nimport axios from \"axios\";\nimport { useRouter, usePathname } from \"next/navigation\";\n\ninterface AuthContextType {\n  user: any;\n  loading: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType>({\n  user: null,\n  loading: true,\n});\n\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\n  const [user, setUser] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n\n  const router = useRouter();\n  const pathname = usePathname();\n\n  const publicRoutes = [\"/auth/login\", \"/auth/signup\"];\n\n  useEffect(() => {\n    async function checkAuth() {\n      // Skip redirect for public pages\n      if (publicRoutes.includes(pathname)) {\n        setLoading(false);\n        return;\n      }\n\n      try {\n        const res = await axios.get(\"http://localhost:8000/users/me\", {\n          withCredentials: true,\n        });\n        setUser(res.data);\n      } catch (error) {\n        router.replace(\"/auth/login\");\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    checkAuth();\n  }, [pathname, router]);\n\n  // Show nothing or a loader while checking auth\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        Loading...\n      </div>\n    );\n  }\n\n  return (\n    <AuthContext.Provider value={{ user, loading }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport function useAuth() {\n  return useContext(AuthContext);\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AAOA;AACA;AAVA;;;;;AAiBA,MAAM,4BAAc,IAAA,qVAAa,EAAkB;IACjD,MAAM;IACN,SAAS;AACX;AAEO,MAAM,eAAe,CAAC,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,gVAAQ,EAAM;IACtC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IAEvC,MAAM,SAAS,IAAA,8QAAS;IACxB,MAAM,WAAW,IAAA,gRAAW;IAE5B,MAAM,eAAe;QAAC;QAAe;KAAe;IAEpD,IAAA,iVAAS,EAAC;QACR,eAAe;YACb,iCAAiC;YACjC,IAAI,aAAa,QAAQ,CAAC,WAAW;gBACnC,WAAW;gBACX;YACF;YAEA,IAAI;gBACF,MAAM,MAAM,MAAM,mMAAK,CAAC,GAAG,CAAC,kCAAkC;oBAC5D,iBAAiB;gBACnB;gBACA,QAAQ,IAAI,IAAI;YAClB,EAAE,OAAO,OAAO;gBACd,OAAO,OAAO,CAAC;YACjB,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;QAAU;KAAO;IAErB,+CAA+C;IAC/C,IAAI,SAAS;QACX,qBACE,6WAAC;YAAI,WAAU;sBAAgD;;;;;;IAInE;IAEA,qBACE,6WAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;QAAQ;kBAC1C;;;;;;AAGP;AAEO,SAAS;IACd,OAAO,IAAA,kVAAU,EAAC;AACpB"}}]
}